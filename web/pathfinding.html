<!DOCTYPE html>
<html>
  <head>
    <title>Pathfinding</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1"/>
    <style>
      .map {
        display: grid;
        grid-template-columns: repeat(10, min-content);
        background-color: #2196F3;
        padding: 5px;
        width: min-content;
      }

      input {
        width: 20px;
        height: 20px;
      }

      /* .box {
        width: 20px;
        height: 20px;
        cursor: pointer;
        font-size: 16;
        background-color: palegoldenrod;
      } */

      .axisLabel {
        text-align: center;
        font-size: 12px;
      }
    </style>
  </head>
  <body style="margin: 20px;">
    <div class="map" id ="map">
    </div>
  </body>
  <script>
    // Create labels for axes
    for (let i=0; i<10; i++) {
      const l = document.createElement('div')
      l.className = 'axisLabel'
      l.innerHTML = i
      document.getElementById("map").append(l)
    }

    // Create map
    for (let i = 0; i < 100; i++) {
      const cb = document.createElement('input')
      cb.type = "checkbox"
      // checkbox.name = "name";
      // checkbox.value = "value";
      cb.id = `cb${i}`
      document.getElementById("map").append(cb)
    }

    // // Check top row
    // for (let i=0; i<50; i++) {
    //   disableBox(i)
    // }

    // // Check first column, first row (0,0)
    // const pos = 0*50 + 0
    // checkBox(pos)

    start(0)

    ////////////////////////////////

    function start (startPoint) {
      const frontier = []
      const reached = new Set()
      frontier.push(startPoint) // Start point
      reached.add(startPoint)
      checkBox(startPoint)

      while (frontier.length > 0) {
        const current = frontier.shift()
        checkBox(current)
        const neighbors = getNeighbors(current)
        console.log('>> neighbors:', current, neighbors)
        for (const point of neighbors) {
          if (!reached.has(point)) {
            frontier.push(point)
            reached.add(point)
          }
        }
      }
      console.log('>> pathfinding finished!!!')
    }

    function getNeighbors (pos) {
      const neighbors = []
      // above neighbor
      if (pos > 9) {
        neighbors.push(pos - 10)
      }
      // right neighbor
      if (pos % 10 !== 9) {
        neighbors.push(pos + 1)
      }
      // below neighbor
      if (pos < 90 ) {
        neighbors.push(pos + 10)
      }
      // left neighbor
      if (pos % 10 !== 0) {
        neighbors.push(pos - 1)
      }
      return neighbors
    }

    function checkBox (pos) {
      document.getElementById(`cb${pos}`).checked = true
    }

    function disableBox (pos) {
      document.getElementById(`cb${pos}`).disabled = true
    }

  </script>
</html>